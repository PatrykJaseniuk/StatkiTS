# 0 
Cel: Przygotowanie Å›rodowiska (IDE), framework , hello world i deploy.

## 0.0 
Framework next.js?

tak

Dlaczego?

Bo w Å‚atwy sposÃ³b mogÄ™ skompilowaÄ‡ ts i react do statycznej strony 

komenda tworzy szablonowy projekt z TS: `npx create-next-app@latest --ts`.

[Static HTML Export](https://nextjs.org/docs/advanced-features/static-html-export)

Å»eby mÃ³c wygenerowaÄ‡ statycznÄ… stronÄ™ muszÄ™: 
+ eksportowaÄ‡ funkcje `getStaticProps` z pliku ze stronÄ… ktÃ³ra ma byÄ‡ statyczna.
+ wyÅ‚Ä…czyÄ‡ optymalizacje obrazÃ³w (bo zwraca bÅ‚Ä…d) poprzez dodanie do pliku `next.config.js` linijki: 
```js
images: { unoptimized: true }
 ```
 + dodaÄ‡ procedurÄ™ `export` do pliku package.json:
 ```json
 "build": "next build && next export",
 ```
 + teraz wystarczy wywoÅ‚aÄ‡ z konsoli 
 ```bash
 npm run build
 ```
 i otrzymam statyczna aplikacje w pliku `out`

 ### Publikacja /hosting

 #### Pliki statycznej strony
 âŒAplikacja jest statyczna wiÄ™c mogÄ™ jÄ… hostowaÄ‡ na githubie. Wystarczy Å¼e skonfigurujÄ™ ustawienia repozytorium zdalnego i wskaÅ¼Ä™ plik `out` jako zawierajÄ…cy pliki aplikacji. W ten sposÃ³b zaraz po wypchniÄ™ciu repo lokalnego nowa wersja aplikacji bÄ™dzie hostowana.âŒ  

ğŸ‘ŒJednak tak siÄ™ nie da. Aplikacja musi siÄ™ znajdowaÄ‡ w `/ (root)`, albo `/docs`, wiÄ™c utworzÄ™ osobne repo do hostowania projektu, a z tego repo bÄ™dÄ™ hostowaÅ‚ dokumentacjÄ™ ktÃ³rÄ… pÃ³Åºniej Å‚adnie wygeneruje z korzystajÄ…c [Docusaurus](https://docusaurus.io/) ğŸ‘Œ

JuÅ¼ lepiej ale, nie dziaÅ‚ajÄ… linki poniewaÅ¼: aplikacja uÅ¼ywa bezwzglÄ™dnych(absolut) adresÃ³w(`/adres`), natomiast github umieszcza pliki aplikacji za dodatkowym czÅ‚onem https://patrykjaseniuk.github.io/StatkiOut <--(dodatkowy czÅ‚on url ktÃ³ry psuje wszystkie linki w aplikacji)

ZmieniÅ‚em rÄ™cznie zmieniarkÄ… fragmenty URL z `/_next/` na `/StatkiOut/next/`. folder z `_` na poczÄ…tku jest niedostÄ™pny. WyglÄ…da Å¼e dziaÅ‚a chociaÅ¼ wciÄ…Å¼ nie wszystkie pliki sÄ… osiÄ…galne ![plot](./res/Zrzut%20ekranu%20z%202022-11-16%2010-12-48.png)

#### Z wykorzystaniem GitHub Actions

Proces budowania moÅ¼e byÄ‡ zrealizowany na serwerze MS GitHub z wykorzystaniem [GH actions](https://docs.github.com/en/actions).

Kolejne kroki:
1) Dla uÅ‚atwienia: folder/katalog z aplikacjÄ… next.js jest jednoczeÅ›nie rootem/poczÄ…tkiem repozytorium.
2) Wybieram deployment aplikacji za pomocÄ… GH actions, GH sam orientuje siÄ™ Å¼e jest to aplikacja next.js i proponuje gotowÄ… akcje (czyli plik .yaml).
3) zapisujÄ™/commitujÄ™ ten plik w odpowiednim folderze z akcjami.
4) Akcja siÄ™ wykonuje, aplikacja jest hostowana i dziaÅ‚a.   

#### Modyfikacja parametrÃ³w Next.JS
+ Moge zmieniÄ‡ root/korzeÅ„ plikÃ³w aplikacji: [Base Path](https://nextjs.org/docs/api-reference/next.config.js/basepath) tak Å¼e teraz wszystkie adresy URL zaczynajÄ… siÄ™ nie od `/` , ale od tego co podaÅ‚em w pliku `next.config.js`.

+ Github ignoruje pliki z `_` na poczÄ…tku (`_next`) 

    + Ok GitHub do wdraÅ¼ania(deploy) statycznych plikÃ³w na serwer uÅ¼ywa czegoÅ› co nazywa siÄ™ [jekyll](https://jekyllrb.com/). Widocznie to caÅ‚e [jekyll](https://jekyllrb.com/) ignoruje katalogi zaczynajÄ…ce siÄ™ na `_`. Å»eby nie ignorowaÅ‚ takich katalogÃ³w trzeba dodaÄ‡ plik `.nojakyll` do katalogu z `_` na poczÄ…tku. [forum](https://github.com/mpetrovich/stylemark/issues/65).
    + MogÄ™ to zautomatyzowaÄ‡ modyfikujÄ…c skrypt np. `build` w pliku `package.json`

+ Zmiana folderu ze skompilowanymi plikami aplikacji z `out` na `docs` Å¼eby speÅ‚niÄ‡ wymagania GitHuba i hostowaÄ‡ aplikacje z tego samego repo. Jeszcze tylko w ustawieniach repo na GH wskaÅ¼Ä™ folder `docs` jako zawierajÄ…cy pliki do hostowania. [dokumetacja](https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#customizing-the-output-directory)

